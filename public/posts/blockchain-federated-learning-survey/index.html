<!DOCTYPE html>
<html lang="zh" dir="auto" data-theme="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>区块链联邦学习综述：增强分布式网络中的信任与隐私 | Minjie&#39;s Blog</title>
<meta name="keywords" content="区块链, 联邦学习, 隐私计算, 分布式系统, 共识机制">
<meta name="description" content="一篇关于区块链联邦学习（BCFL）的全面综述，探讨了如何通过结合区块链的安全特性和联邦学习的隐私保护能力，构建可信的分布式机器学习系统 
">
<meta name="author" content="Ji Liu, Chunlu Chen, Yu Li, et al.">
<link rel="canonical" href="http://localhost:1313/posts/blockchain-federated-learning-survey/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/code.png">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/code.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/code.png">
<link rel="apple-touch-icon" href="http://localhost:1313/code.png">
<link rel="mask-icon" href="http://localhost:1313/code.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/posts/blockchain-federated-learning-survey/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet">
<script type="text/javascript"
        async
        src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[\[','\]\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});

MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<style>
code.has-jax {
    font: inherit;
    font-size: 100%;
    background: inherit;
    border: inherit;
    color: #515151;
}
</style>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Minjie&#39;s Blog (Alt + H)">Minjie&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="Minjie&#39;s Blog">
                    <span>首页</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives/" title="归档">
                    <span>归档</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/categories/" title="Categories">
                    <span>分类</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="搜索">
                    <span>搜索</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about/" title="关于我">
                    <span>关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      区块链联邦学习综述：增强分布式网络中的信任与隐私
    </h1>
    <div class="post-description">
      一篇关于区块链联邦学习（BCFL）的全面综述，探讨了如何通过结合区块链的安全特性和联邦学习的隐私保护能力，构建可信的分布式机器学习系统 

    </div>
    <div class="post-meta"><span title='2025-12-14 19:37:05 +0800 CST'>2025年12月14日</span>&nbsp;·&nbsp;<span>Ji Liu, Chunlu Chen, Yu Li, et al.</span>

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e8%ae%ba%e6%96%87%e5%9f%ba%e6%9c%ac%e4%bf%a1%e6%81%af" aria-label="论文基本信息">论文基本信息</a></li>
                <li>
                    <a href="#%e4%b8%80%e7%a0%94%e7%a9%b6%e8%83%8c%e6%99%af" aria-label="一、研究背景">一、研究背景</a><ul>
                        
                <li>
                    <a href="#11-%e5%8c%ba%e5%9d%97%e9%93%be%e6%8a%80%e6%9c%af%e6%a6%82%e8%bf%b0" aria-label="1.1 区块链技术概述">1.1 区块链技术概述</a></li>
                <li>
                    <a href="#12-%e8%81%94%e9%82%a6%e5%ad%a6%e4%b9%a0%e5%9f%ba%e7%a1%80" aria-label="1.2 联邦学习基础">1.2 联邦学习基础</a></li>
                <li>
                    <a href="#13-fl%e9%9d%a2%e4%b8%b4%e7%9a%84%e4%b8%bb%e8%a6%81%e6%8c%91%e6%88%98" aria-label="1.3 FL面临的主要挑战">1.3 FL面临的主要挑战</a><ul>
                        
                <li>
                    <a href="#%e6%8c%91%e6%88%981%e6%95%b0%e6%8d%ae%e5%bc%82%e6%9e%84%e6%80%a7" aria-label="挑战1：数据异构性">挑战1：数据异构性</a></li>
                <li>
                    <a href="#%e6%8c%91%e6%88%982%e9%9a%90%e7%a7%81%e4%b8%8e%e5%ae%89%e5%85%a8" aria-label="挑战2：隐私与安全">挑战2：隐私与安全</a></li>
                <li>
                    <a href="#%e6%8c%91%e6%88%983%e5%8f%af%e8%bf%bd%e6%ba%af%e6%80%a7%e4%b8%8e%e9%97%ae%e8%b4%a3%e6%80%a7" aria-label="挑战3：可追溯性与问责性">挑战3：可追溯性与问责性</a></li></ul>
                </li>
                <li>
                    <a href="#14-%e6%95%b4%e5%90%88%e5%8c%ba%e5%9d%97%e9%93%be%e4%b8%8efl%e7%9a%84%e5%bf%85%e8%a6%81%e6%80%a7" aria-label="1.4 整合区块链与FL的必要性">1.4 整合区块链与FL的必要性</a><ul>
                        
                <li>
                    <a href="#%e4%bb%b7%e5%80%bc1%e6%bf%80%e5%8a%b1%e6%9c%ba%e5%88%b6" aria-label="价值1：激励机制">价值1：激励机制</a></li>
                <li>
                    <a href="#%e4%bb%b7%e5%80%bc2%e5%a2%9e%e5%bc%ba%e6%95%b0%e6%8d%ae%e9%9a%90%e7%a7%81%e4%b8%8e%e5%ae%89%e5%85%a8" aria-label="价值2：增强数据隐私与安全">价值2：增强数据隐私与安全</a></li>
                <li>
                    <a href="#%e4%bb%b7%e5%80%bc3%e4%bf%a1%e4%bb%bb%e4%b8%8e%e9%80%8f%e6%98%8e" aria-label="价值3：信任与透明">价值3：信任与透明</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e4%ba%8cbcfl%e7%b3%bb%e7%bb%9f%e6%9e%b6%e6%9e%84" aria-label="二、BCFL系统架构">二、BCFL系统架构</a><ul>
                        
                <li>
                    <a href="#21-%e6%95%b4%e4%bd%93%e6%9e%b6%e6%9e%84%e6%a6%82%e8%a7%88" aria-label="2.1 整体架构概览">2.1 整体架构概览</a></li>
                <li>
                    <a href="#22-%e6%9e%b6%e6%9e%84%e5%88%86%e7%b1%bb%e4%b8%89%e7%a7%8d%e8%80%a6%e5%90%88%e6%96%b9%e5%bc%8f" aria-label="2.2 架构分类：三种耦合方式">2.2 架构分类：三种耦合方式</a><ul>
                        
                <li>
                    <a href="#%e5%ae%8c%e5%85%a8%e8%80%a6%e5%90%88-fully-coupled" aria-label="完全耦合 (Fully Coupled)">完全耦合 (Fully Coupled)</a></li>
                <li>
                    <a href="#%e7%81%b5%e6%b4%bb%e8%80%a6%e5%90%88-flexibly-coupled" aria-label="灵活耦合 (Flexibly Coupled)">灵活耦合 (Flexibly Coupled)</a></li>
                <li>
                    <a href="#%e6%9d%be%e6%95%a3%e8%80%a6%e5%90%88-loosely-coupled" aria-label="松散耦合 (Loosely Coupled)">松散耦合 (Loosely Coupled)</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e4%b8%89%e5%85%ad%e5%b1%82%e6%9e%b6%e6%9e%84%e8%af%a6%e8%a7%a3" aria-label="三、六层架构详解">三、六层架构详解</a><ul>
                        
                <li>
                    <a href="#31-%e5%9f%ba%e7%a1%80%e8%ae%be%e6%96%bd%e5%b1%82" aria-label="3.1 基础设施层">3.1 基础设施层</a><ul>
                        
                <li>
                    <a href="#l1%e4%b8%8el2%e6%9e%b6%e6%9e%84" aria-label="L1与L2架构">L1与L2架构</a></li>
                <li>
                    <a href="#%e5%ad%98%e5%82%a8%e6%96%b9%e6%a1%88" aria-label="存储方案">存储方案</a></li>
                <li>
                    <a href="#%e8%ae%a1%e7%ae%97%e8%b5%84%e6%ba%90" aria-label="计算资源">计算资源</a></li></ul>
                </li>
                <li>
                    <a href="#32-%e7%bd%91%e7%bb%9c%e5%b1%82" aria-label="3.2 网络层">3.2 网络层</a><ul>
                        
                <li>
                    <a href="#%e4%b8%ad%e5%bf%83%e5%8c%96%e7%bd%91%e7%bb%9c" aria-label="中心化网络">中心化网络</a></li>
                <li>
                    <a href="#%e5%a4%9a%e4%b8%ad%e5%bf%83%e5%8c%96%e7%bd%91%e7%bb%9c%e8%81%94%e9%82%a6%e5%8c%ba%e5%9d%97%e9%93%be" aria-label="多中心化网络（联邦区块链）">多中心化网络（联邦区块链）</a></li>
                <li>
                    <a href="#%e5%8e%bb%e4%b8%ad%e5%bf%83%e5%8c%96%e7%bd%91%e7%bb%9c" aria-label="去中心化网络">去中心化网络</a></li></ul>
                </li>
                <li>
                    <a href="#33-%e9%80%9a%e4%bf%a1%e5%b1%82" aria-label="3.3 通信层">3.3 通信层</a><ul>
                        
                <li>
                    <a href="#%e6%a0%b8%e5%bf%83%e4%bb%bb%e5%8a%a1" aria-label="核心任务">核心任务</a></li>
                <li>
                    <a href="#%e5%85%b3%e9%94%ae%e6%8a%80%e6%9c%af" aria-label="关键技术">关键技术</a></li>
                <li>
                    <a href="#%e9%9d%a2%e4%b8%b4%e7%9a%84%e6%8c%91%e6%88%98" aria-label="面临的挑战">面临的挑战</a></li></ul>
                </li>
                <li>
                    <a href="#34-%e7%ae%97%e6%b3%95%e5%b1%82" aria-label="3.4 算法层">3.4 算法层</a><ul>
                        
                <li>
                    <a href="#1-%e8%81%9a%e5%90%88%e7%ae%97%e6%b3%95" aria-label="1. 聚合算法">1. 聚合算法</a></li>
                <li>
                    <a href="#2-%e5%ae%89%e5%85%a8%e7%ae%97%e6%b3%95" aria-label="2. 安全算法">2. 安全算法</a></li>
                <li>
                    <a href="#3-%e4%bc%98%e5%8c%96%e7%ae%97%e6%b3%95" aria-label="3. 优化算法">3. 优化算法</a></li>
                <li>
                    <a href="#4-%e6%bf%80%e5%8a%b1%e7%ae%97%e6%b3%95" aria-label="4. 激励算法">4. 激励算法</a></li></ul>
                </li>
                <li>
                    <a href="#35-%e5%8c%ba%e5%9d%97%e9%93%be%e5%85%b1%e8%af%86%e5%b1%82" aria-label="3.5 区块链共识层">3.5 区块链共识层</a><ul>
                        
                <li>
                    <a href="#%e5%85%b1%e8%af%86%e6%9c%ba%e5%88%b6%e7%9a%84%e9%87%8d%e8%a6%81%e6%80%a7" aria-label="共识机制的重要性">共识机制的重要性</a></li>
                <li>
                    <a href="#%e4%b8%bb%e8%a6%81%e5%85%b1%e8%af%86%e6%9c%ba%e5%88%b6" aria-label="主要共识机制">主要共识机制</a></li></ul>
                </li>
                <li>
                    <a href="#36-%e5%ba%94%e7%94%a8%e5%b1%82" aria-label="3.6 应用层">3.6 应用层</a><ul>
                        
                <li>
                    <a href="#%e8%bd%a6%e8%81%94%e7%bd%91-internet-of-vehicles" aria-label="车联网 (Internet of Vehicles)">车联网 (Internet of Vehicles)</a></li>
                <li>
                    <a href="#%e8%b5%84%e6%ba%90%e5%88%86%e9%85%8d" aria-label="资源分配">资源分配</a></li>
                <li>
                    <a href="#%e8%be%b9%e7%bc%98%e8%ae%a1%e7%ae%97" aria-label="边缘计算">边缘计算</a></li>
                <li>
                    <a href="#%e5%8c%bb%e7%96%97%e5%81%a5%e5%ba%b7" aria-label="医疗健康">医疗健康</a></li>
                <li>
                    <a href="#%e8%83%bd%e6%ba%90" aria-label="能源">能源</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e5%9b%9b%e5%85%b3%e9%94%ae%e6%a1%86%e6%9e%b6%e6%a1%88%e4%be%8b" aria-label="四、关键框架案例">四、关键框架案例</a><ul>
                        
                <li>
                    <a href="#bml-es" aria-label="BML-ES">BML-ES</a></li>
                <li>
                    <a href="#trustfed" aria-label="TrustFed">TrustFed</a></li>
                <li>
                    <a href="#%e5%9f%ba%e4%ba%8e%e7%8a%b6%e6%80%81%e9%80%9a%e9%81%93%e7%9a%84%e4%bf%a1%e4%bb%bb%e7%9b%91%e7%9d%a3%e6%9c%ba%e5%88%b6" aria-label="基于状态通道的信任监督机制">基于状态通道的信任监督机制</a></li>
                <li>
                    <a href="#proof-of-federated-training-poft" aria-label="Proof of Federated Training (PoFT)">Proof of Federated Training (PoFT)</a></li>
                <li>
                    <a href="#%e5%8e%bb%e4%b8%ad%e5%bf%83%e5%8c%96%e6%a8%a1%e5%9e%8b%e8%ae%ad%e7%bb%83%e5%92%8c%e6%a2%af%e5%ba%a6%e8%81%9a%e5%90%88" aria-label="去中心化模型训练和梯度聚合">去中心化模型训练和梯度聚合</a></li>
                <li>
                    <a href="#blockchain-in-the-loop-fl" aria-label="Blockchain-in-the-loop FL">Blockchain-in-the-loop FL</a></li>
                <li>
                    <a href="#swarm-learning" aria-label="Swarm Learning">Swarm Learning</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%ba%94%e6%8c%91%e6%88%98%e4%b8%8e%e6%9c%aa%e6%9d%a5%e7%a0%94%e7%a9%b6%e6%96%b9%e5%90%91" aria-label="五、挑战与未来研究方向">五、挑战与未来研究方向</a><ul>
                        
                <li>
                    <a href="#51-%e6%95%b0%e6%8d%ae%e5%ae%89%e5%85%a8%e4%b8%8e%e9%9a%90%e7%a7%81%e4%bf%9d%e6%8a%a4" aria-label="5.1 数据安全与隐私保护">5.1 数据安全与隐私保护</a></li>
                <li>
                    <a href="#52-%e6%a8%a1%e5%9e%8b%e6%95%88%e7%8e%87%e4%b8%8e%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96" aria-label="5.2 模型效率与性能优化">5.2 模型效率与性能优化</a></li>
                <li>
                    <a href="#53-%e5%8f%af%e6%89%a9%e5%b1%95%e6%80%a7" aria-label="5.3 可扩展性">5.3 可扩展性</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%85%ad%e8%ae%ba%e6%96%87%e8%b4%a1%e7%8c%ae%e6%80%bb%e7%bb%93" aria-label="六、论文贡献总结">六、论文贡献总结</a></li>
                <li>
                    <a href="#%e4%b8%83%e4%b8%aa%e4%ba%ba%e7%90%86%e8%a7%a3" aria-label="七、个人理解">七、个人理解</a><ul>
                        
                <li>
                    <a href="#%e8%ae%ba%e6%96%87%e7%9a%84%e6%a0%b8%e5%bf%83%e4%bb%b7%e5%80%bc" aria-label="论文的核心价值">论文的核心价值</a></li>
                <li>
                    <a href="#%e8%ae%ba%e6%96%87%e7%9a%84%e7%89%b9%e7%82%b9" aria-label="论文的特点">论文的特点</a></li>
                <li>
                    <a href="#%e5%af%b9%e6%9c%aa%e6%9d%a5%e7%a0%94%e7%a9%b6%e7%9a%84%e5%90%af%e7%a4%ba" aria-label="对未来研究的启示">对未来研究的启示</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%bc%95%e7%94%a8" aria-label="引用">引用</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="论文基本信息">论文基本信息<a hidden class="anchor" aria-hidden="true" href="#论文基本信息">#</a></h2>
<p><strong>标题</strong>: Enhancing trust and privacy in distributed networks: a comprehensive survey on blockchain-based federated learning</p>
<p><strong>作者</strong>: Ji Liu, Chunlu Chen, Yu Li, Lin Sun, Yulun Song, Jingbo Zhou, Bo Jing, Dejing Dou</p>
<p><strong>发表</strong>: Knowledge and Information Systems (2024) 66:4377–4403</p>
<p><strong>机构</strong>: 恒生电子、九州大学、百度、联通数科、波士顿咨询</p>
<hr>
<h2 id="一研究背景">一、研究背景<a hidden class="anchor" aria-hidden="true" href="#一研究背景">#</a></h2>
<h3 id="11-区块链技术概述">1.1 区块链技术概述<a hidden class="anchor" aria-hidden="true" href="#11-区块链技术概述">#</a></h3>
<p>论文首先介绍了区块链的基本概念和特性：</p>
<p><strong>核心特性</strong>：</p>
<ul>
<li><strong>去中心化架构</strong>：将验证系统从中心化转变为去中心化，通过多个用户的共识来促进验证过程</li>
<li><strong>不可篡改性</strong>：通过哈希函数将数据块链接成链，任何篡改尝试都会破坏哈希链，导致不匹配</li>
<li><strong>加密安全</strong>：使用哈希函数、数字签名和加密技术保护数据完整性和安全性</li>
<li><strong>透明性</strong>：区块链上记录的每笔交易对所有网络参与者透明可见</li>
<li><strong>智能合约</strong>：自动执行的协议，按预定义规则执行交易，无需中介</li>
</ul>
<p><strong>区块链类型</strong>：</p>
<table>
  <thead>
      <tr>
          <th>类型</th>
          <th>访问方式</th>
          <th>典型代表</th>
          <th>常用共识</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>无许可链</strong></td>
          <td>匿名访问，任何人可加入</td>
          <td>Bitcoin, Ethereum</td>
          <td>PoW, PoS</td>
      </tr>
      <tr>
          <td><strong>有许可链</strong></td>
          <td>需要注册，限制访问</td>
          <td>Hyperledger Fabric</td>
          <td>Kafka, Raft, PBFT</td>
      </tr>
  </tbody>
</table>
<p><strong>分布式系统特性</strong>：</p>
<ul>
<li><strong>去中心化</strong>：控制和决策分布在各个节点</li>
<li><strong>共识机制</strong>：确保所有节点对系统状态达成一致</li>
<li><strong>容错性</strong>：通过冗余、复制和错误处理机制实现</li>
<li><strong>可扩展性</strong>：通过增加节点水平扩展</li>
</ul>
<h3 id="12-联邦学习基础">1.2 联邦学习基础<a hidden class="anchor" aria-hidden="true" href="#12-联邦学习基础">#</a></h3>
<p><strong>FL基本流程</strong>：</p>
<ol>
<li>中央服务器初始化模型参数并分发给所有客户端</li>
<li>客户端使用本地数据训练模型</li>
<li>客户端上传训练后的模型参数到中央服务器</li>
<li>中央服务器聚合参数，更新全局模型</li>
<li>重复以上步骤直到模型收敛</li>
</ol>
<p><strong>FL分类</strong>：</p>
<p>按<strong>网络拓扑</strong>：</p>
<ul>
<li>中心化FL</li>
<li>去中心化FL</li>
</ul>
<p>按<strong>数据可用性</strong>：</p>
<ul>
<li>跨孤岛FL (Cross-silo)</li>
<li>跨设备FL (Cross-device)</li>
</ul>
<p>按<strong>数据分区</strong>：</p>
<ul>
<li>横向FL：特征空间相同，样本不同</li>
<li>纵向FL：样本相同，特征空间不同</li>
<li>联邦迁移学习：样本和特征都不同</li>
</ul>
<p><strong>常见优化算法</strong>：FedAvg, FedProx, SCAFFOLD, FedPD, FedBN</p>
<h3 id="13-fl面临的主要挑战">1.3 FL面临的主要挑战<a hidden class="anchor" aria-hidden="true" href="#13-fl面临的主要挑战">#</a></h3>
<p>论文总结了FL的三大核心挑战：</p>
<h4 id="挑战1数据异构性">挑战1：数据异构性<a hidden class="anchor" aria-hidden="true" href="#挑战1数据异构性">#</a></h4>
<p><strong>三种异构</strong>：</p>
<ul>
<li><strong>特征异构</strong>：参与设备拥有不同的特征集，使模型聚合和对齐变得困难</li>
<li><strong>数据分布异构</strong>：由于用户群体、地理位置、数据收集实践的差异，导致数据分布不同，可能引入偏见</li>
<li><strong>数据格式异构</strong>：来自不同来源或平台的数据可能具有不同的格式、表示或结构</li>
</ul>
<p><strong>解决技术</strong>：</p>
<ul>
<li>模型架构调整和特征工程</li>
<li>元学习和域适应</li>
<li>多格式设计的模型</li>
</ul>
<h4 id="挑战2隐私与安全">挑战2：隐私与安全<a hidden class="anchor" aria-hidden="true" href="#挑战2隐私与安全">#</a></h4>
<p><strong>主要威胁</strong>：</p>
<ul>
<li><strong>数据泄露</strong>：共享模型可能包含训练数据的敏感信息</li>
<li><strong>成员推理攻击</strong>：对手试图确定特定数据点是否属于训练数据集</li>
<li><strong>模型投毒攻击</strong>：对手注入恶意数据或操纵本地更新以毒化共享模型</li>
</ul>
<p><strong>防御技术</strong>：</p>
<ul>
<li><strong>差分隐私(DP)</strong>：向数据或模型更新添加噪声以模糊个体贡献</li>
<li><strong>同态加密(HE)</strong>：允许对加密数据进行计算</li>
<li><strong>安全多方计算(SMPC)</strong>：多方在不暴露私有数据的情况下联合计算</li>
<li><strong>可信执行环境(TEE)</strong>：如TrustFL方案</li>
</ul>
<h4 id="挑战3可追溯性与问责性">挑战3：可追溯性与问责性<a hidden class="anchor" aria-hidden="true" href="#挑战3可追溯性与问责性">#</a></h4>
<p><strong>可追溯性需求</strong>：</p>
<ul>
<li><strong>模型审计</strong>：通过记录元数据（模型架构、超参数、数据源）跟踪和审计FL中训练的模型</li>
<li><strong>数据溯源</strong>：追踪训练数据的来源和历史，确保真实性并评估潜在偏见</li>
</ul>
<p><strong>问责性需求</strong>：</p>
<ul>
<li><strong>参与者问责</strong>：参与者应遵守商定的协议、隐私措施和安全实践</li>
<li><strong>安全与信任维护</strong>：实施适当的安全措施，保护数据机密性，防止未授权访问或恶意活动</li>
</ul>
<p><strong>面临的困难</strong>：</p>
<ul>
<li>FL的去中心化结构使协调和建立共识变得复杂</li>
<li>在保护隐私的同时确保可追溯性需要平衡</li>
<li>数据分散在不同参与者之间，追踪数据来源和血统面临挑战</li>
</ul>
<h3 id="14-整合区块链与fl的必要性">1.4 整合区块链与FL的必要性<a hidden class="anchor" aria-hidden="true" href="#14-整合区块链与fl的必要性">#</a></h3>
<p>论文论述了结合区块链和FL的三大核心价值：</p>
<h4 id="价值1激励机制">价值1：激励机制<a hidden class="anchor" aria-hidden="true" href="#价值1激励机制">#</a></h4>
<ul>
<li>传统FL中，许多客户端由于经济理性不愿分享有价值的数据</li>
<li>区块链原生的加密货币或代币系统可建立激励机制</li>
<li>通过奖励数据贡献者、模型验证者和其他参与者，激励积极参与、数据共享和模型改进</li>
</ul>
<h4 id="价值2增强数据隐私与安全">价值2：增强数据隐私与安全<a hidden class="anchor" aria-hidden="true" href="#价值2增强数据隐私与安全">#</a></h4>
<ul>
<li><strong>解决中心化风险</strong>：传统FL严重依赖单一中央服务器，如果服务器恶意行为，整个系统可能崩溃</li>
<li><strong>防御客户端攻击</strong>：现有设计容易受到恶意客户端的攻击，可能上传有毒模型攻击FL网络</li>
<li><strong>区块链优势</strong>：
<ul>
<li>去中心化和不可变的特性提供安全透明的数据共享和存储框架</li>
<li>加密方法显著增强数据隐私和安全</li>
<li>参与者可以验证共享模型的完整性和真实性，而不暴露敏感信息</li>
</ul>
</li>
</ul>
<h4 id="价值3信任与透明">价值3：信任与透明<a hidden class="anchor" aria-hidden="true" href="#价值3信任与透明">#</a></h4>
<ul>
<li>区块链固有的透明性和可审计性可以解决FL中的信任问题</li>
<li>使参与者能够追踪数据、模型和计算的历史和来源</li>
<li>透明性在参与者之间培养信任，因为他们可以验证FL过程的公平性和可靠性</li>
</ul>
<hr>
<h2 id="二bcfl系统架构">二、BCFL系统架构<a hidden class="anchor" aria-hidden="true" href="#二bcfl系统架构">#</a></h2>
<h3 id="21-整体架构概览">2.1 整体架构概览<a hidden class="anchor" aria-hidden="true" href="#21-整体架构概览">#</a></h3>
<p>论文提出从底向上的五层架构（加上贯穿的区块链共识层）：</p>
<pre tabindex="0"><code>┌─────────────────────────────────────────────┐
│         应用层 (Application Layer)          │
│   医疗 | 车联网 | 边缘计算 | 能源 | 资源分配  │
└─────────────────────────────────────────────┘
                      ↕
┌─────────────────────────────────────────────┐
│      区块链共识层 (Blockchain Consensus)     │
│  PoW | PoS | DPoS | PBFT | PoQ | PoF | Raft  │
└─────────────────────────────────────────────┘
                      ↕
┌─────────────────────────────────────────────┐
│         算法层 (Algorithm Layer)            │
│ 聚合算法 | 安全算法 | 优化算法 | 激励算法    │
└─────────────────────────────────────────────┘
                      ↕
┌─────────────────────────────────────────────┐
│       通信层 (Communication Layer)          │
│   加密技术 | 网络协议 | 同步机制 | P2P框架   │
└─────────────────────────────────────────────┘
                      ↕
┌─────────────────────────────────────────────┐
│          网络层 (Network Layer)             │
│   中心化 | 多中心化 | 去中心化 (P2P)         │
└─────────────────────────────────────────────┘
                      ↕
┌─────────────────────────────────────────────┐
│      基础设施层 (Infrastructure Layer)      │
│  L1/L2架构 | 存储资源 | 计算资源(CPU/GPU/TPU)│
└─────────────────────────────────────────────┘
</code></pre><h3 id="22-架构分类三种耦合方式">2.2 架构分类：三种耦合方式<a hidden class="anchor" aria-hidden="true" href="#22-架构分类三种耦合方式">#</a></h3>
<p>论文根据操作动态将BCFL系统分为三种架构：</p>
<h4 id="完全耦合-fully-coupled">完全耦合 (Fully Coupled)<a hidden class="anchor" aria-hidden="true" href="#完全耦合-fully-coupled">#</a></h4>
<p><strong>定义</strong>：客户端同时作为训练节点和区块链节点</p>
<p><strong>特点</strong>：</p>
<ul>
<li>提供去中心化</li>
<li>要求高设备性能</li>
</ul>
<p><strong>适用场景</strong>：参与者设备能力强的环境</p>
<h4 id="灵活耦合-flexibly-coupled">灵活耦合 (Flexibly Coupled)<a hidden class="anchor" aria-hidden="true" href="#灵活耦合-flexibly-coupled">#</a></h4>
<p><strong>定义</strong>：分离区块链和FL操作以减轻网络通信负担</p>
<p><strong>实现方式</strong>：</p>
<ul>
<li><strong>委员会选择</strong>：选择部分节点参与共识</li>
<li><strong>智能合约</strong>：通过智能合约实现分离</li>
</ul>
<p><strong>特点</strong>：平衡了去中心化和效率</p>
<h4 id="松散耦合-loosely-coupled">松散耦合 (Loosely Coupled)<a hidden class="anchor" aria-hidden="true" href="#松散耦合-loosely-coupled">#</a></h4>
<p><strong>定义</strong>：优先考虑声誉来衡量参与者可靠性</p>
<p><strong>关注点</strong>：</p>
<ul>
<li>主要关注模型更新验证</li>
<li>在账本上进行声誉管理</li>
</ul>
<p><strong>特点</strong>：轻量级，适合大规模异构设备</p>
<hr>
<h2 id="三六层架构详解">三、六层架构详解<a hidden class="anchor" aria-hidden="true" href="#三六层架构详解">#</a></h2>
<p><a href="https://postimg.cc/ZBnnGxYK"><img alt="image.png" loading="lazy" src="https://i.postimg.cc/KzrTg0dL/image.png"></a></p>
<h3 id="31-基础设施层">3.1 基础设施层<a hidden class="anchor" aria-hidden="true" href="#31-基础设施层">#</a></h3>
<h4 id="l1与l2架构">L1与L2架构<a hidden class="anchor" aria-hidden="true" href="#l1与l2架构">#</a></h4>
<p><strong>L1层架构</strong>：</p>
<ul>
<li>FL直接集成到区块链</li>
<li>提供去中心化的P2P框架</li>
<li>对等方自由加入</li>
<li>由共识机制支持系统可靠性</li>
</ul>
<p><strong>L2层架构</strong>：</p>
<ul>
<li>FL构建在区块链节点之上</li>
<li>强调分层数据处理和模型训练</li>
</ul>
<h4 id="存储方案">存储方案<a hidden class="anchor" aria-hidden="true" href="#存储方案">#</a></h4>
<p><strong>去中心化存储</strong>：</p>
<ul>
<li>采用去中心化存储模型</li>
<li>通过高级加密方法确保隐私：
<ul>
<li>安全多方计算(SMPC)</li>
<li>同态加密</li>
</ul>
</li>
</ul>
<p><strong>优势</strong>：</p>
<ul>
<li>促进安全、私密的数据共享和模型聚合</li>
<li>区块链的可审计性提高透明度和信任</li>
</ul>
<h4 id="计算资源">计算资源<a hidden class="anchor" aria-hidden="true" href="#计算资源">#</a></h4>
<p><strong>本地计算</strong>：</p>
<ul>
<li>本地满足计算需求</li>
<li>利用CPU、GPU、TPU</li>
</ul>
<p><strong>异构性处理</strong>：</p>
<ul>
<li>通过轻量级架构处理设备异构性</li>
<li>模型压缩技术</li>
<li>联邦蒸馏(Federated Distillation)</li>
<li>优化性能和资源分配</li>
</ul>
<h3 id="32-网络层">3.2 网络层<a hidden class="anchor" aria-hidden="true" href="#32-网络层">#</a></h3>
<p>论文将区块链网络结构分为三类：</p>
<h4 id="中心化网络">中心化网络<a hidden class="anchor" aria-hidden="true" href="#中心化网络">#</a></h4>
<p><strong>特点</strong>：</p>
<ul>
<li>所有通信和交易通过中央节点路由</li>
<li>常见于有许可区块链系统</li>
</ul>
<p><strong>优势</strong>：</p>
<ul>
<li>简化效率</li>
<li>由于单一控制点，共识更快</li>
</ul>
<p><strong>劣势</strong>：</p>
<ul>
<li>显著的安全风险</li>
<li>中央节点成为攻击的主要目标</li>
<li>可能损害整个网络的完整性和隐私</li>
</ul>
<h4 id="多中心化网络联邦区块链">多中心化网络（联邦区块链）<a hidden class="anchor" aria-hidden="true" href="#多中心化网络联邦区块链">#</a></h4>
<p><strong>特点</strong>：</p>
<ul>
<li>引入多个中央节点而非单一节点</li>
<li>通常用于平衡多个组织或方之间的控制</li>
</ul>
<p><strong>优势</strong>：</p>
<ul>
<li>增强协作</li>
<li>维持一定程度的中心化治理</li>
<li>改善安全性，减少单点故障风险</li>
</ul>
<p><strong>劣势</strong>：</p>
<ul>
<li>仍可能面临可扩展性限制</li>
<li>中心化控制问题</li>
</ul>
<h4 id="去中心化网络">去中心化网络<a hidden class="anchor" aria-hidden="true" href="#去中心化网络">#</a></h4>
<p><strong>特点</strong>：</p>
<ul>
<li>以无许可区块链为代表（如Bitcoin、Ethereum）</li>
<li>在广泛的节点阵列中分布数据验证和交易处理</li>
<li>P2P网络结构</li>
<li>无单点控制或故障</li>
<li>每个节点以平等地位运行</li>
</ul>
<p><strong>优势</strong>：</p>
<ul>
<li>最高级别的安全性和数据完整性</li>
<li>显著增强对审查、篡改和攻击的抵抗力</li>
</ul>
<p><strong>劣势</strong>：</p>
<ul>
<li>可能在可扩展性方面面临挑战</li>
<li>由于决策过程的分布式性质，共识速度可能较慢</li>
</ul>
<p><strong>论文总结</strong>：网络设置的选择深刻影响BCFL系统的性能和安全性</p>
<h3 id="33-通信层">3.3 通信层<a hidden class="anchor" aria-hidden="true" href="#33-通信层">#</a></h3>
<h4 id="核心任务">核心任务<a hidden class="anchor" aria-hidden="true" href="#核心任务">#</a></h4>
<p>通信层在BCFL系统中扮演关键角色，负责：</p>
<ul>
<li>编排参与者之间的数据传输和消息交换</li>
<li>促进协作学习过程</li>
<li>高效、安全地传输模型更新、聚合结果和协调指令</li>
</ul>
<h4 id="关键技术">关键技术<a hidden class="anchor" aria-hidden="true" href="#关键技术">#</a></h4>
<p><strong>加密技术</strong>：</p>
<ul>
<li>在传输前加密数据</li>
<li>防止未授权访问</li>
<li>确保维护数据隐私</li>
</ul>
<p><strong>网络协议</strong>：</p>
<ul>
<li>采用可靠高效的网络协议管理消息传递</li>
<li>确保数据包可靠有序地到达目的地</li>
<li>即使在网络中断或拥塞情况下</li>
</ul>
<p><strong>同步机制</strong>：</p>
<ul>
<li>在BCFL系统的分布式特性下，同步机制至关重要</li>
<li>协调参与者之间的通信</li>
<li>确保及时共享模型更新</li>
<li>管理数据传输的异步性质</li>
<li>对齐来自不同参与者的更新</li>
</ul>
<p><strong>去中心化通信框架</strong>：</p>
<ul>
<li>采用去中心化框架（如P2P网络或区块链）</li>
<li>促进参与者之间的直接通信</li>
<li>消除中心化中介的需要</li>
<li>增强系统的韧性和去中心化</li>
<li>减少潜在瓶颈和故障点</li>
</ul>
<p><strong>案例 - BLADE-FL</strong>：</p>
<ul>
<li>论文提到的完全去中心化框架</li>
<li>将训练和挖矿的责任都分配给全节点</li>
<li>增强去中心化和系统韧性</li>
</ul>
<h4 id="面临的挑战">面临的挑战<a hidden class="anchor" aria-hidden="true" href="#面临的挑战">#</a></h4>
<p><strong>延迟和有限带宽</strong>：</p>
<ul>
<li>通过数据压缩技术解决</li>
<li>最小化数据传输的大小</li>
<li>提高交换速度</li>
</ul>
<p><strong>优化策略</strong>：</p>
<ul>
<li>自适应网络路由</li>
<li>拥塞控制算法</li>
<li>优化数据流</li>
<li>减少延迟</li>
<li>提高通信效率</li>
</ul>
<p><strong>批处理和缓存</strong>：</p>
<ul>
<li>降低数据传输的频率和数量</li>
<li>减轻网络约束的影响</li>
</ul>
<h3 id="34-算法层">3.4 算法层<a hidden class="anchor" aria-hidden="true" href="#34-算法层">#</a></h3>
<p>论文将算法层分为四个关键方面：</p>
<h4 id="1-聚合算法">1. 聚合算法<a hidden class="anchor" aria-hidden="true" href="#1-聚合算法">#</a></h4>
<p><strong>经典算法</strong>：</p>
<p><strong>FedAvg</strong>：</p>
<ul>
<li>参与者上传本地模型权重到区块链网络</li>
<li>通过智能合约计算权重平均值获得全局模型</li>
</ul>
<p><strong>进阶算法</strong>：</p>
<ul>
<li><strong>FedProx</strong>：处理异构性</li>
<li><strong>SCAFFOLD</strong>：减少方差</li>
<li><strong>FedPD</strong>：原对偶优化</li>
<li><strong>FedBN</strong>：批归一化层处理</li>
</ul>
<p><strong>异步FL系统</strong>：</p>
<ul>
<li>解决中心化模型带来的安全挑战</li>
<li>实现隐私、容错和可靠的数据共享</li>
<li>基于有许可区块链的FL异步聚合协议</li>
<li>通过将学习模型集成到区块链并执行二阶聚合计算</li>
<li>有效缓解同步FL算法的问题</li>
</ul>
<h4 id="2-安全算法">2. 安全算法<a hidden class="anchor" aria-hidden="true" href="#2-安全算法">#</a></h4>
<p>论文详细介绍了三种核心隐私保护技术：</p>
<p><strong>安全多方计算(SMPC)</strong>：</p>
<p>定义：保护数据隐私的计算模型，允许多方在不披露私有数据的情况下进行计算</p>
<p>特点：</p>
<ul>
<li>各方持有部分私有数据</li>
<li>可以对加密数据执行计算以维护隐私</li>
<li>各方通过协议进行通信和交互</li>
<li>共同计算最终结果而无需直接暴露私有数据</li>
</ul>
<p>技术组成：</p>
<ul>
<li>同态加密</li>
<li>秘密共享(Secret Sharing)</li>
<li>零知识证明(Zero-Knowledge Proof)</li>
<li>安全多方计算协议</li>
</ul>
<p><strong>同态加密(HE)</strong>：</p>
<p>定义：满足密文同态运算性质的加密算法</p>
<p>核心特性：</p>
<ul>
<li>数据经过同态加密后</li>
<li>对密文执行特定计算</li>
<li>密文计算结果经相应同态解密后</li>
<li>等价于对明文数据直接执行相同计算</li>
<li>实现数据的&quot;可计算但不可见&quot;状态</li>
</ul>
<p>优势：</p>
<ul>
<li>可以在密文上进行计算而无需密钥</li>
<li>减少通信成本</li>
<li>平衡各方的计算成本</li>
</ul>
<p><strong>差分隐私(DP)</strong>：</p>
<p>定义：通过添加扰动噪声保护底层用户隐私信息的技术</p>
<p>原理：</p>
<ul>
<li>确保即使攻击者掌握除一条信息外的所有其他信息</li>
<li>仍无法推断该条信息</li>
</ul>
<p>方法：</p>
<ul>
<li>向结果添加符合特定分布的噪声</li>
<li>随机化查询结果</li>
</ul>
<p>挑战：需要解决数据可用性问题（由于需要在查询结果中加入随机性，可能导致数据可用性下降）</p>
<h4 id="3-优化算法">3. 优化算法<a hidden class="anchor" aria-hidden="true" href="#3-优化算法">#</a></h4>
<p><strong>目标</strong>：</p>
<ul>
<li>优化FL性能</li>
<li>减少训练轮次</li>
<li>降低通信开销</li>
<li>提高模型准确性</li>
</ul>
<p><strong>常用方法</strong>：</p>
<ul>
<li>梯度压缩：减少通信开销</li>
<li>梯度剪枝：减少通信开销</li>
<li>异步更新：减少训练轮次</li>
<li>本地更新：减少训练轮次</li>
</ul>
<h4 id="4-激励算法">4. 激励算法<a hidden class="anchor" aria-hidden="true" href="#4-激励算法">#</a></h4>
<p>论文强调：虽然FL在保护数据隐私的同时实现协作学习展现了巨大优势，但仍面临如何激励人们通过贡献计算能力和数据加入FL的开放挑战。</p>
<p><strong>基于声誉的FL</strong>：</p>
<p>核心思想：通过设计安全机制衡量参与者的可靠性</p>
<p><strong>代表性工作</strong>：</p>
<ol>
<li>
<p><strong>区块链声誉系统</strong></p>
<ul>
<li>增加贡献正确有用模型参数的客户端的声誉值</li>
<li>降低上传恶意参数的客户端的声誉值</li>
<li>影响后续训练轮次的客户端选择</li>
</ul>
</li>
<li>
<p><strong>RepBFL框架</strong></p>
<ul>
<li>结合区块链和FL应用于车联网(IoV)</li>
<li>利用区块链确保共享数据保护</li>
<li>选择高声誉节点进行FL</li>
<li>评估IoV中车辆的可靠性</li>
</ul>
</li>
<li>
<p><strong>基于模型质量参数的评估</strong></p>
<ul>
<li>使用模型质量参数进行声誉评估</li>
<li>区块链衡量工作者可靠性并维护声誉值</li>
</ul>
</li>
<li>
<p><strong>CFFL协作公平框架</strong></p>
<ul>
<li>引入基于经验个体模型性能的声誉机制</li>
<li>调节参与者奖励以保持通信轮次间的公平性</li>
</ul>
</li>
<li>
<p><strong>多权重主观逻辑模型</strong></p>
<ul>
<li>将声誉作为量化移动设备可靠性和可信度的指标</li>
<li>采用多权重主观逻辑模型进行声誉计算</li>
<li>联盟区块链技术以去中心化方式保护声誉存储</li>
</ul>
</li>
</ol>
<p><strong>基于支付的FL</strong>：</p>
<ol>
<li>
<p><strong>FedCoin</strong></p>
<ul>
<li>采用Shapley值(SVs)进行可行的基于SV的利润分配</li>
<li>公平反映对全局FL模型的贡献</li>
<li>区块链共识实体部署Shapley权益证明协议(PoSap)</li>
<li>用于计算SVs和创建新区块</li>
</ul>
</li>
<li>
<p><strong>公共区块链上的FL协议</strong></p>
<ul>
<li>解决监控工作者行为和保证协议遵守的挑战</li>
<li>将竞争嵌入BCFL</li>
<li>仅奖励贡献有价值的工作者</li>
<li>自然抑制偏离协议的行为</li>
</ul>
</li>
<li>
<p><strong>移动群体FL系统</strong></p>
<ul>
<li>通过根据个人贡献提供奖励来激励移动设备训练准确模型</li>
<li>Stackelberg博弈建模服务器和设备间的交互</li>
<li>比较基于规模和基于准确性的两种奖励策略</li>
</ul>
</li>
<li>
<p><strong>跨孤岛横向FL的贡献评估</strong></p>
<ul>
<li>解决透明评估不同数据所有者贡献的挑战</li>
<li>使用可调精度量化数据所有者基于SV的贡献</li>
<li>保护隐私</li>
</ul>
</li>
</ol>
<p><strong>DeepChain</strong>：</p>
<p>特点：</p>
<ul>
<li>客户端联合参与训练深度学习模型的协作框架</li>
<li>保证数据机密性和计算可验证性</li>
<li>为参与者提供激励</li>
</ul>
<p>激励机制：</p>
<ul>
<li>围绕超时检查和货币惩罚编排</li>
<li>促进参与者之间的公平性</li>
<li>在参与者未能满足截止日期或不准确执行函数的情况下采取惩罚措施</li>
<li>施加货币惩罚，没收不诚实参与者的预存资金</li>
<li>在诚实参与者之间重新分配</li>
</ul>
<p><strong>机制设计综述</strong>：</p>
<p>论文引用的综述工作：</p>
<ul>
<li>基于关键技术对现有激励机制进行分类</li>
<li>包括：Stackelberg博弈、拍卖、合约理论、Shapley值、强化学习、区块链</li>
</ul>
<p><strong>Refiner系统</strong>：</p>
<ul>
<li>部署在Ethereum公共区块链平台</li>
<li>运行激励机制，根据训练数据量和本地更新性能奖励参与者</li>
<li>处理大规模协作中的恶意参与者</li>
<li>部署随机选择的验证者委员会</li>
<li>验证者惩罚不道德参与者，拒绝奖励并从全局模型中消除腐败更新</li>
</ul>
<h3 id="35-区块链共识层">3.5 区块链共识层<a hidden class="anchor" aria-hidden="true" href="#35-区块链共识层">#</a></h3>
<p>论文强调：在FL系统实现的背景下，共识涉及参与者同步模型并集体做出决策所采用的协议。共识算法确保所有参与者对模型更新的有效性达成一致，并防止恶意行为者篡改系统。</p>
<h4 id="共识机制的重要性">共识机制的重要性<a hidden class="anchor" aria-hidden="true" href="#共识机制的重要性">#</a></h4>
<p>共识机制的作用：</p>
<ul>
<li>在极短时间内完成交易验证和确认</li>
<li>通过特殊节点的投票完成</li>
<li>如果利益不同的节点能对交易达成共识，则可以认为整个网络也能达成共识</li>
</ul>
<h4 id="主要共识机制">主要共识机制<a hidden class="anchor" aria-hidden="true" href="#主要共识机制">#</a></h4>
<p><strong>1. Proof of Work (PoW)</strong></p>
<p>特点：</p>
<ul>
<li>Bitcoin使用PoW工作量证明机制</li>
<li>Ethereum曾使用PoW和PoS混合共识机制</li>
<li>相当于解决一个随时间变难的数学难题</li>
</ul>
<p>挑战：</p>
<ul>
<li>计算消耗大量能源</li>
<li>可能间接影响碳排放和环境</li>
</ul>
<p>应用案例：</p>
<ul>
<li><strong>BCFL系统</strong>：引入分布式哈希表用于高效区块生成，采用PoW共识机制确保全局模型一致性</li>
<li><strong>LearningChain</strong>：去中心化联邦系统，利用基于PoW共识的拜占庭容错聚合算法（l-nearest aggregation），通过竞争选择领导者，使用l-nearest算法聚合梯度</li>
<li><strong>Swarm Learning (SL)</strong>：去中心化机器学习方法，结合边缘计算和基于区块链的P2P网络，数据和参数保留在边缘，消除中央协调者的需求</li>
</ul>
<p><strong>2. Proof of Stake (PoS)</strong></p>
<p>特点：</p>
<ul>
<li>被视为PoW的环保替代方案</li>
<li>验证者基于持有和愿意&quot;质押&quot;作为抵押品的加密货币数量被选择创建新区块</li>
</ul>
<p><strong>3. Delegated Proof of Stake (DPoS)</strong></p>
<p>特点：</p>
<ul>
<li>利益相关者选举一定数量的代表来验证交易和创建区块</li>
<li>设计为比传统PoS更民主和高效</li>
</ul>
<p><strong>4. Proof of Training Quality (PoQ)</strong></p>
<p>背景：现有共识机制（如PoW）消耗大量计算和通信资源，或对数据共享的额外贡献有限</p>
<p>解决方案：</p>
<ul>
<li>论文提到提出了结合FL与差分隐私的共识机制PoQ</li>
<li>将数据模型训练与共识过程集成</li>
<li>用模型参数准确性的认证替代PoW中寻找随机数的无意义计算工作</li>
</ul>
<p><strong>5. Byzantine Fault Tolerance (BFT)</strong></p>
<p>目标：抵御&quot;拜占庭&quot;故障（组件可能失败且对组件是否失败的信息不完善）</p>
<p>变体：</p>
<ul>
<li><strong>PBFT (Practical Byzantine Fault Tolerance)</strong>：用于Hyperledger Fabric</li>
<li><strong>FBA (Federated Byzantine Agreement)</strong>：用于Stellar</li>
</ul>
<p><strong>6. Proof of Federation (PoF)</strong></p>
<p><strong>Biscotti系统</strong>：</p>
<ul>
<li>将PoF与一致性哈希和可验证随机函数(VRF)结合</li>
<li>为对等节点选择关键角色，协助协调模型更新的隐私和安全</li>
<li>通过Multi-Krum防御防止对等点毒化模型</li>
<li>采用差分化私有噪声提供隐私</li>
<li>利用Shamir秘密共享进行安全聚合</li>
</ul>
<p>挑战：当所有节点参与共识时，计算负载过大</p>
<p><strong>7. RAFT</strong></p>
<p>特点：</p>
<ul>
<li>在一组节点中选举领导者</li>
<li>领导者负责提出和验证区块</li>
<li>专注于简单性和容错性</li>
<li>设计为比其他共识算法更易理解和实现</li>
</ul>
<p>应用：一些有许可区块链网络</p>
<p><strong>8. Proof of Federated Training (PoFT)</strong></p>
<p>特点：</p>
<ul>
<li>实现跨多个区块链网络的可验证模型训练的框架</li>
<li>解决PoW中的功耗/资源浪费问题</li>
<li>解决区块链中的数据隐私问题</li>
</ul>
<p>扩展 - PoFL：</p>
<ul>
<li>联邦学习证明</li>
<li>应用于车辆网络</li>
<li>车辆通过遵守区块链网络内的FL共识证明竞争成为矿工</li>
<li>IPFS和PoFL用于确保连接自动驾驶车辆的去中心化联邦学习安全</li>
</ul>
<p><strong>9. 委员会共识</strong></p>
<p><strong>BFLC框架</strong>：</p>
<ul>
<li>基于区块链的委员会共识FL框架</li>
<li>利用区块链进行全局模型存储和本地模型更新交换</li>
<li>消除中心化服务器需求</li>
<li>引入创新的委员会共识机制减少计算负载并缓解恶意攻击</li>
</ul>
<p><strong>论文总结</strong>：</p>
<ul>
<li>所有这些共识算法都有其优势和劣势</li>
<li>适合不同的用例</li>
<li>选择正确的共识机制对区块链网络的安全性、可扩展性和效率至关重要</li>
<li>共识算法的选择受期望的去中心化程度、安全性、可扩展性以及区块链网络的特定需求等因素影响</li>
</ul>
<h3 id="36-应用层">3.6 应用层<a hidden class="anchor" aria-hidden="true" href="#36-应用层">#</a></h3>
<p>论文探讨了FL在不同领域的应用，这些领域可以提供基于该技术的服务。</p>
<h4 id="车联网-internet-of-vehicles">车联网 (Internet of Vehicles)<a hidden class="anchor" aria-hidden="true" href="#车联网-internet-of-vehicles">#</a></h4>
<p><strong>应用背景</strong>：</p>
<ul>
<li>车辆日益成为数据生成源</li>
<li>GPS位置、速度、道路状况等数据可以为更好的交通管理、路线规划和事故预防做出贡献</li>
<li>但这些数据也是敏感的</li>
</ul>
<p><strong>BCFL的价值</strong>：</p>
<ul>
<li>能够聚合来自多辆车辆的数据来训练模型，而无需共享原始数据</li>
<li>区块链还可以用于维护网络中车辆交互和交易的防篡改记录</li>
</ul>
<p><strong>相关研究</strong>：论文引用了多篇关于BCFL在车联网应用的研究工作</p>
<h4 id="资源分配">资源分配<a hidden class="anchor" aria-hidden="true" href="#资源分配">#</a></h4>
<p><strong>应用价值</strong>：</p>
<ul>
<li>在大型分布式系统中，有效的资源分配对于最大化效率至关重要</li>
<li>通过在区块链网络之上应用FL，可以根据从网络使用模式中学习的知识动态分配资源</li>
<li>将区块链与FL集成不仅加强隐私和可靠性，还为高效的资源分配和利用提供平台</li>
</ul>
<h4 id="边缘计算">边缘计算<a hidden class="anchor" aria-hidden="true" href="#边缘计算">#</a></h4>
<p><strong>应用潜力</strong>：</p>
<ul>
<li>BCFL在边缘计算应用方面具有巨大潜力</li>
<li>为数据共享、资源协作和共享、模型更新和升级以及抗干扰和容错提供安全机制</li>
</ul>
<p><strong>实现方式</strong>：</p>
<ul>
<li>通过利用边缘设备的计算资源和数据</li>
<li>使智能应用能够高效安全地执行推理和决策任务</li>
</ul>
<p><strong>解决的挑战</strong>：</p>
<ul>
<li>数据隐私</li>
<li>资源约束</li>
<li>边缘计算中常见的不稳定环境</li>
</ul>
<p><strong>应用现状</strong>：</p>
<ul>
<li>已在移动电话场景中进行了广泛研究和应用</li>
<li>预计将为更多边缘计算场景的发展和扩展提供解决方案</li>
</ul>
<h4 id="医疗健康">医疗健康<a hidden class="anchor" aria-hidden="true" href="#医疗健康">#</a></h4>
<p><strong>应用价值</strong>：</p>
<ul>
<li>患者数据敏感但对检测疾病和改善治疗极有价值</li>
<li>BCFL允许医疗机构协作并从大量患者数据中学习，而不损害患者隐私</li>
</ul>
<p><strong>区块链优势</strong>：</p>
<ul>
<li>可以提供数据和计算的可追溯性</li>
<li>增加对学习模型的信任</li>
</ul>
<p><strong>相关应用</strong>：</p>
<ul>
<li>疾病检测</li>
<li>治疗改进</li>
<li>电子健康记录系统的安全性、隐私和互操作性</li>
</ul>
<h4 id="能源">能源<a hidden class="anchor" aria-hidden="true" href="#能源">#</a></h4>
<p><strong>应用场景</strong>：</p>
<p><strong>智能电网</strong>：</p>
<ul>
<li>优化电网运营</li>
<li>促进微电网间的P2P能源交易和共享</li>
</ul>
<p><strong>工业物联网(IIoT)</strong>：</p>
<ul>
<li>解决无线网络中与信用数据共享相关的安全和隐私问题</li>
</ul>
<p><strong>可再生能源</strong>：</p>
<ul>
<li>应用于风能涡轮机的叶片结冰检测</li>
<li>风能是快速增长的可再生能源部门</li>
</ul>
<hr>
<h2 id="四关键框架案例">四、关键框架案例<a hidden class="anchor" aria-hidden="true" href="#四关键框架案例">#</a></h2>
<p>论文介绍了多个具有代表性的BCFL框架：</p>
<h3 id="bml-es">BML-ES<a hidden class="anchor" aria-hidden="true" href="#bml-es">#</a></h3>
<ul>
<li>基于区块链的工业物联网(IIoT)边缘服务机器学习框架</li>
<li>利用智能合约实现聚合策略</li>
<li>采用SM2公钥密码系统保护隐私并提高模型准确性</li>
</ul>
<h3 id="trustfed">TrustFed<a hidden class="anchor" aria-hidden="true" href="#trustfed">#</a></h3>
<ul>
<li>将区块链集成到跨设备FL系统中</li>
<li>防止模型投毒</li>
<li>确保公平训练</li>
<li>维护参与者声誉</li>
<li>使用智能合约管理声誉并排除恶意行为者</li>
<li>确保可靠的训练环境</li>
</ul>
<h3 id="基于状态通道的信任监督机制">基于状态通道的信任监督机制<a hidden class="anchor" aria-hidden="true" href="#基于状态通道的信任监督机制">#</a></h3>
<ul>
<li>使用区块链和FL为分布式数据共享创建可信环境</li>
<li>采用状态通道为FL任务建立安全沙箱</li>
<li>确保整个过程的完整性和监督</li>
</ul>
<h3 id="proof-of-federated-training-poft">Proof of Federated Training (PoFT)<a hidden class="anchor" aria-hidden="true" href="#proof-of-federated-training-poft">#</a></h3>
<ul>
<li>实现跨区块链网络可验证模型训练的框架</li>
<li>增强协作训练过程中的透明度和信任</li>
</ul>
<h3 id="去中心化模型训练和梯度聚合">去中心化模型训练和梯度聚合<a hidden class="anchor" aria-hidden="true" href="#去中心化模型训练和梯度聚合">#</a></h3>
<ul>
<li>提出基于区块链的安全模型训练架构</li>
<li>引入旨在提高模型准确性、隐私和性能的梯度聚合方法</li>
</ul>
<h3 id="blockchain-in-the-loop-fl">Blockchain-in-the-loop FL<a hidden class="anchor" aria-hidden="true" href="#blockchain-in-the-loop-fl">#</a></h3>
<ul>
<li>将传统FL与Hyperledger Fabric合并</li>
<li>结合游戏化以增强参与度和效率</li>
</ul>
<h3 id="swarm-learning">Swarm Learning<a hidden class="anchor" aria-hidden="true" href="#swarm-learning">#</a></h3>
<ul>
<li>去中心化机器学习方法</li>
<li>结合边缘计算和基于区块链的P2P网络</li>
<li>数据和参数保留在边缘</li>
<li>消除中央协调者的需求</li>
<li>发表在Nature上，应用于COVID-19等疾病的去中心化临床机器学习</li>
</ul>
<hr>
<h2 id="五挑战与未来研究方向">五、挑战与未来研究方向<a hidden class="anchor" aria-hidden="true" href="#五挑战与未来研究方向">#</a></h2>
<p>论文在结尾部分识别了BCFL面临的主要挑战并提出未来研究方向：</p>
<h3 id="51-数据安全与隐私保护">5.1 数据安全与隐私保护<a hidden class="anchor" aria-hidden="true" href="#51-数据安全与隐私保护">#</a></h3>
<p><strong>挑战</strong>：</p>
<ul>
<li>在FL与区块链结合的环境中，确保数据安全和隐私成为首要关注点</li>
<li>在网络环境中有效管理敏感信息（如医疗记录或个人身份）是一项挑战</li>
<li>需要深入探索在不暴露其真实内容的情况下处理此类数据的密码技术</li>
</ul>
<p><strong>研究方向</strong>：</p>
<ul>
<li>未来研究应深入研究针对这个集成系统定制的新密码解决方案</li>
</ul>
<h3 id="52-模型效率与性能优化">5.2 模型效率与性能优化<a hidden class="anchor" aria-hidden="true" href="#52-模型效率与性能优化">#</a></h3>
<p><strong>挑战</strong>：</p>
<ul>
<li>分布式数据和模型的高效计算是FL的基本要求</li>
<li>该领域的核心挑战涉及：
<ul>
<li>设计降低计算复杂度的算法</li>
<li>最小化通信开销</li>
<li>提高模型训练和推理的效率</li>
</ul>
</li>
</ul>
<p><strong>研究方向</strong>：</p>
<ul>
<li>未来研究工作应集中于微调分布式优化方法</li>
<li>整合先进的压缩策略以减轻通信负担</li>
<li>探索硬件增强以提高计算效率</li>
<li>调查混合模型，合并中心化和去中心化训练方法，也具有相当大的前景</li>
</ul>
<h3 id="53-可扩展性">5.3 可扩展性<a hidden class="anchor" aria-hidden="true" href="#53-可扩展性">#</a></h3>
<p><strong>问题描述</strong>：</p>
<ul>
<li>随着区块链和FL融合以创建安全、私密的数据管理框架</li>
<li>可扩展性成为一个关键瓶颈</li>
<li>特别是当系统规模扩大和需求增加时</li>
</ul>
<p><strong>解决方案</strong>：
论文提出的前瞻性方法：</p>
<ul>
<li><strong>链下计算 (Off-chain Calculations)</strong>：卸载密集任务，减少主区块链负载</li>
<li><strong>侧链 (Sidechains)</strong>：单独管理交易以减少拥塞</li>
<li><strong>Layer-2技术</strong>：
<ul>
<li>状态通道(State Channels)</li>
<li>Plasma</li>
<li>在现有区块链之上促进快速交易，同时保持安全性</li>
</ul>
</li>
</ul>
<p><strong>目标</strong>：</p>
<ul>
<li>这些方法利用区块链和FL的核心原则</li>
<li>旨在培育可扩展、安全和去中心化的学习生态系统</li>
</ul>
<hr>
<h2 id="六论文贡献总结">六、论文贡献总结<a hidden class="anchor" aria-hidden="true" href="#六论文贡献总结">#</a></h2>
<p>论文明确指出其核心贡献：</p>
<ol>
<li>
<p><strong>分类法提出</strong></p>
<ul>
<li>从三个方面呈现BCFL的分类：
<ul>
<li>去中心化架构</li>
<li>分离网络</li>
<li>基于声誉的架构</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>通用架构总结</strong></p>
<ul>
<li>总结了BCFL系统的通用架构</li>
<li>提供了基于区块链的FL架构的全面视角</li>
<li>包括六个关键层：
<ul>
<li>基础设施层</li>
<li>网络层</li>
<li>通信层</li>
<li>算法层</li>
<li>区块链共识层</li>
<li>应用层</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>应用分析</strong></p>
<ul>
<li>分析了BCFL在以下领域的应用：
<ul>
<li>医疗健康</li>
<li>物联网</li>
<li>其他隐私敏感领域</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>未来方向识别</strong></p>
<ul>
<li>识别了BCFL的未来研究方向</li>
</ul>
</li>
<li>
<p><strong>综合视角</strong></p>
<ul>
<li>本研究旨在提供BCFL系统的全面视角</li>
<li>为BCFL系统领域的未来研究提供基础</li>
</ul>
</li>
</ol>
<hr>
<h2 id="七个人理解">七、个人理解<a hidden class="anchor" aria-hidden="true" href="#七个人理解">#</a></h2>
<blockquote>
<p><strong>说明</strong>：以下是我基于论文内容的理解和思考，并非论文原文</p>
</blockquote>
<h3 id="论文的核心价值">论文的核心价值<a hidden class="anchor" aria-hidden="true" href="#论文的核心价值">#</a></h3>
<p>这篇综述的主要价值在于：</p>
<ul>
<li><strong>系统性整合</strong>：将分散的BCFL研究整合到统一框架中</li>
<li><strong>架构清晰</strong>：六层架构为理解BCFL系统提供了清晰的分析框架</li>
<li><strong>全面覆盖</strong>：从底层基础设施到上层应用都有涉及</li>
</ul>
<h3 id="论文的特点">论文的特点<a hidden class="anchor" aria-hidden="true" href="#论文的特点">#</a></h3>
<p><strong>优势</strong>：</p>
<ul>
<li>文献综述全面，引用了大量相关工作</li>
<li>分类清晰，便于理解不同方法的特点</li>
<li>对各种技术（共识机制、激励机制、隐私保护）都有介绍</li>
</ul>
<p><strong>可能的不足</strong>：</p>
<ul>
<li>对各种方案的性能对比分析较少</li>
<li>部分技术介绍较为概念化，实现细节不足</li>
<li>缺少对不同方案适用场景的明确指导</li>
</ul>
<h3 id="对未来研究的启示">对未来研究的启示<a hidden class="anchor" aria-hidden="true" href="#对未来研究的启示">#</a></h3>
<ul>
<li>BCFL是一个跨学科领域，需要区块链、机器学习、密码学等多方面知识</li>
<li>不同应用场景可能需要不同的架构选择（完全耦合 vs 灵活耦合 vs 松散耦合）</li>
<li>隐私保护、效率、去中心化程度之间的权衡是核心问题</li>
<li>实际应用还需要考虑工程实现、成本、监管合规等问题</li>
</ul>
<hr>
<h2 id="引用">引用<a hidden class="anchor" aria-hidden="true" href="#引用">#</a></h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bibtex" data-lang="bibtex"><span class="line"><span class="cl"><span class="nc">@article</span><span class="p">{</span><span class="nl">liu2024enhancing</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="na">title</span><span class="p">=</span><span class="s">{Enhancing trust and privacy in distributed networks: a comprehensive survey on blockchain-based federated learning}</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="na">author</span><span class="p">=</span><span class="s">{Liu, Ji and Chen, Chunlu and Li, Yu and Sun, Lin and Song, Yulun and Zhou, Jingbo and Jing, Bo and Dou, Dejing}</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="na">journal</span><span class="p">=</span><span class="s">{Knowledge and Information Systems}</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="na">volume</span><span class="p">=</span><span class="s">{66}</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="na">pages</span><span class="p">=</span><span class="s">{4377--4403}</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="na">year</span><span class="p">=</span><span class="s">{2024}</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="na">publisher</span><span class="p">=</span><span class="s">{Springer}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/">区块链</a></li>
      <li><a href="http://localhost:1313/tags/%E8%81%94%E9%82%A6%E5%AD%A6%E4%B9%A0/">联邦学习</a></li>
      <li><a href="http://localhost:1313/tags/%E9%9A%90%E7%A7%81%E8%AE%A1%E7%AE%97/">隐私计算</a></li>
      <li><a href="http://localhost:1313/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/">分布式系统</a></li>
      <li><a href="http://localhost:1313/tags/%E5%85%B1%E8%AF%86%E6%9C%BA%E5%88%B6/">共识机制</a></li>
    </ul>
  </footer><div id="tw-comment"></div>
<script>
    
    const getStoredTheme = () => localStorage.getItem("pref-theme") === "light" ? "nord_light" : "dark_dimmed";
    const setGiscusTheme = () => {
        const sendMessage = (message) => {
            const iframe = document.querySelector('iframe.giscus-frame');
            if (iframe) {
                iframe.contentWindow.postMessage({giscus: message}, 'https://giscus.app');
            }
        }
        sendMessage({setConfig: {theme: getStoredTheme()}})
    }

    document.addEventListener("DOMContentLoaded", () => {
        const giscusAttributes = {
            "src": "https://giscus.app/client.js",
            "data-repo": "minjieblog\/minjieblog.github.io",
            "data-repo-id": "R_kgDOQjMm6A",
            "data-category": "Announcements",
            "data-category-id": "DIC_kwDOQjMm6M4Czb4B",
            "data-mapping": "pathname",
            "data-strict": "0",
            "data-reactions-enabled": "1",
            "data-emit-metadata": "0",
            "data-input-position": "bottom",
            "data-theme": getStoredTheme(),
            "data-lang": "zh-CN",
            "data-loading": "lazy",
            "crossorigin": "anonymous",
        };

        
        const giscusScript = document.createElement("script");
        Object.entries(giscusAttributes).forEach(
                ([key, value]) => giscusScript.setAttribute(key, value));
        document.querySelector("#tw-comment").appendChild(giscusScript);

        
        const themeSwitcher = document.querySelector("#theme-toggle");
        if (themeSwitcher) {
            themeSwitcher.addEventListener("click", setGiscusTheme);
        }
        const themeFloatSwitcher = document.querySelector("#theme-toggle-float");
        if (themeFloatSwitcher) {
            themeFloatSwitcher.addEventListener("click", setGiscusTheme);
        }
    });
</script>
</article>
    </main>
    
<footer class="footer">
        <span><a href="https://minjieblog.github.io/">©2025 Minjie&rsquo;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
